{{set . "title" "結果 - KOJ"}}
{{template "navigation.html" .}}

<div class="container mt-5 mb-5">
  <div class="row">
    <div class="span6">
    {{template "flash.html" .}}
    </div>
  </div>

  <h1 class="h1">提出</h1>
  <div class="mt-4">
    <h2 class="h3">ソースコード</h2>
    <pre>{{.submission.SourceCode}}</pre>
  </div>
  <div class="mt-4">
    <h2 class="h3">詳細</h2>
    <table class="table table-bordered table-striped">
      <tr>
        <td>日時</td>
        <td>{{datetime .submission.CreatedAt}}</td>
      </tr>
      <tr>
        <td>問題</td>
        <td><a href="..{{url "Problem.Index" .problem.ID}}">{{.problem.Title}}</a></td>
      </tr>
      <tr>
        <td>ユーザー</td>
        <td>{{.user.DisplayName}}</td>
      </tr>
      <tr>
        <td>結果</td>
        <td>
          <label class="badge {{.Converter.GetStatusBadgeStyle .submission.Status}}">
          {{.Converter.GetStatusBadge .submission.Status}}
          </label>
        </td>
      </tr>
      <tr>
        <td>実行時間</td>
        <td>{{.submission.ExecTime}}</td>
      </tr>
      <tr>
        <td>メモリ</td>
        <td>{{.submission.MemoryUsage}}</td>
      </tr>
      <tr>
        <td>コード長</td>
        <td>{{.submission.CodeBytes}}</td>
      </tr>
    </table>
  </div>
  <div class="mt-4">
    <h2 class="h3">テストケース</h2>
    <table class="table table-bordered table-striped">
      <thead>
      <tr>
        <td>セット</td>
        <td>得点 / 配点</td>
        <td>ケース</td>
        <td>結果</td>
        <td>実行時間</td>
        <td>メモリ</td>
      </tr>
      </thead>
      <tbody>
      {{range $i, $s := .setResults}}
      {{ $length := len $s.JudgeResults }}
      {{range $j, $r := $s.JudgeResults}}
      <tr>
      {{if eq $j 0}}
        <td rowspan="{{$length}}">{{$s.CaseSetID}}</td>
        <td rowspan="{{$length}}">{{$s.Point}} / {{$s.CaseSet.Point}}</td>
      {{end}}
        <td>{{$r.TestCaseID}}</td>
        <td><label
            class="badge {{$.Converter.GetStatusBadgeStyle $r.Status}}">{{$.Converter.GetStatusBadge $r.Status}}</label>
        </td>
        <td>TODO</td>
        <td>TODO</td>
      </tr>
      {{end}}
      {{end}}
      </tbody>
    </table>
  </div>
</div>

{{template "footer.html" .}}
